#include <stdio.h>
#include <libyang/libyang.h>

int main() {
    struct ly_ctx *ctx = ly_ctx_new(NULL, 0);
    struct lyd_node *data = NULL;
    const char *yang_model = "/poc/sample.yang";

    if (!ctx) {
        fprintf(stderr, "Failed to create context.\n");
        return 1;
    }

    data = lyd_parse_path(ctx, yang_model, LYD_XML, LYD_OPT_CONFIG);
    if (!data) {
        fprintf(stderr, "Failed to parse data.\n");
        ly_ctx_destroy(ctx, NULL);
        return 1;
    }

    lyd_print_file(stdout, data, LYD_XML, LYP_FORMAT);

    lyd_free_withsiblings(data);
    ly_ctx_destroy(ctx, NULL);
    return 0;
}
